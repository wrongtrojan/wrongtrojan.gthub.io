+++
title = "1.设计基础"
date = 2025-01-23
draft = true
categories=["程序设计"]
+++
<!--more-->
**数据的共享与保护**

**标识符的作用域和可见性**

> **作用域(标识符在程序正文中有效的区域)**
>
> 函数原型作用域
>
> 函数声明时形式参数的作用范围
>
> 局部作用域
>
> 仅在特定代码块(函数、循环、条件)中可见可用
>
> 类作用域(struct)
>
> 成员函数中未声明同名局部标识符，可以直接访问成员
>
> 通过表达式x.m(对象访问)或者X::(类访问),访问成员
>
> 通过ptr-\>m(ptr是指向对象的指针)这样的表达式访问成员
>
> 其他特殊访问和作用域规则
>
> 限定作用域的enum枚举类
>
> enum class/struct 与类的访问方式相同
>
> 文件作用域
>
> 不再前述各个作用域中出现的声明,具有文件作用域
>
> 作用域开始于声明点,结束于文件尾
>
> 具有文件作用域的
>
> 命名空间作用域(全局变量的划分工具)
>
> namespace 命名空间名{代码声明}
>
> 避免重名的冲突
>
> **可见性**
>
> 程序运行到某一点,能够引用到的标识符,就是该处可见的标识符
>
> 多个具有包含关系的作用域中声明同名标识符,外层标识符内层不可见

**对象的生存期**

**静态生存期**

> 如果对象的生存期与程序运行期相同,我们称它具有静态生存期
>
> 文件作用域声明的对象都具有静态生存期
>
> 函数内部局部作用域
>
> 使用关键字static使得声明对象获得静态生存期
>
> 只在函数初次调用初始化,后续调用共用一个内存
>
> 类成员static修饰
>
> 表示该类所有对象共有

**动态生存期**

> 其余对象都具有动态生存期
>
> 局部作用域中声明的具有动态生存期，习惯上也称局部生存期对象
>
> 局部生存期诞生于声明点，结束于声明所在块执行完毕之时

**类的静态成员**

> 静态数据(类属性)
>
> 属性为整个类共有，不属于任何一个具体对象，用static关键字声明
>
> 静态数据成员具有静态生存期
>
> 静态函数成员
>
> 静态成员函数可以直接访问该类的静态数据和函数成员
>
> 访问非静态成员，必须通过对象名

**类的友元**

友元关系提供了不同类(对象)的成员函数间、成员函数与一般函数间进行数据共享

**友元函数**

> 友元函数是在类中用关键字friend修饰的非成员函数
>
> 函数体中可以用过对象名访问类的私有和保护成员
>
> 在成员函数前方添加friend构造型来表征

**友元类**

> 一个类可以将另一个类声明为友元类
>
> 则A类的所有成员函数都是B类的友元函数，都可以访问B的私有和保护成员
>
> class B{ \... friend class A; \...};
>
> 友元关系是不能传递的，友元关系是单项的

**共享数据的保护**

**常对象**

> 常对象必须进行初始化，而且不能被更新
>
> **用const修饰的类成员**
>
> 常成员函数
>
> 类型const(返回值是const) 函数名(参数表) const(函数成员为const)；
>
> 常数据成员
>
> 常引用
>
> 常引用所引用的对象不能被更新
>
> const 类型 &引用名；
>
> 非常引用只能绑定普通的对象，常引用可以绑定常对象

**多文件结构和编译预处理命令**

**c++程序的一般组织结构**

> 通常一个项目至少分为3个文件：
>
> 类定义文件(\*h文件) 类实现文件(\*cpp文件) 类的实现文件(\*cpp文件)
>
> 一般将需要分配空间的定义放在源文件；将不需要分配空间的放在头文件
>
> 内联函数特殊，需要被多个编译单元调用的内联函数应出现在头文件
>
> **外部变量与外部函数**
>
> 外部变量
>
> 如果变量还能被其他文件使用，那么就称这个变量是外部变量。
>
> 文件作用域中定义的变量，默认情况下都是外部变量
>
> 其他文件中如果需要使用这一变量，需要用extern关键字加以声明
>
> 外部函数
>
> 所有类之外声明的函数没有特殊声明都具有文件作用域
>
> 在调用前进行引用性声明后，这些函数可以在不同编译单元被调用
>
> 可以不加extern
>
> 将变量和函数限制在编译单元内
>
> 使用static关键字来修饰文件作用域的变量和函数，与extern起相反作用
>
> **标准C++库**
>
> C语言中，系统函数、系统的外部变量和一些宏定义都放置在运行库中
>
> C++的库中还加入了预定义的模板和类
>
> 标准C++类与组件在逻辑上分为：
>
> 输入输出类 容器类与ADT类 存储管理类
>
> 算法 错误处理 运行环境支持
>
> 使用标准库时，需要引入指定命名空间 std
>
> **编译预处理**
>
> #include指令 (包含指令)
>
> 将另一个源文件嵌入当前源文件中该点处
>
> #include \<fileName\>
>
> 按标准方式搜索，文件位于系统目录的include子目录下
>
> #include "fileName"
>
> 首先在当前目录中搜索，若没有，再按照标准方式搜索
>
> #define和#undef指令
>
> #define 宏定义 #undef 删除宏
>
> 条件编译指令
>
> 限定程序中的某些内容在满足一定条件才参与编译
>
> #if\... #elif\... #else\... #endif\...
>
> #ifdef 如果标识符被定义过
>
> #ifndef 如果标识符没有被定义过
>
> defined 操作符
>
> 预处理符而非指令
>
> defined(标识符) 若标识符被#define定义过，且未经#undef删除，则为true

**\*常成员函数的声明原则**

不会改变对象状态的函数声明为常成员函数

会改变成员状态的函数不能声明为常成员函数，成员状态不只有非静态成员对象值
